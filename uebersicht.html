<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Turnierübersicht</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: sans-serif;
      color: white;
      background: linear-gradient(135deg, #306030, #002800);
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .spiel-liste {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .spiel {
      border: 2px solid white;
      padding: 15px;
      width: 300px;
      background: rgba(255, 255, 255, 0.05);
    }

    .spiel .info {
      font-size: 0.9em;
      color: #ccc;
      margin-bottom: 6px;
    }

    .spiel strong {
      display: block;
      margin-bottom: 5px;
    }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>
  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyDCX6Q4HhN8MgxSDzVdaaLsyRXbauVpH3I",
        authDomain: "waldhof.firebaseapp.com",
        databaseURL: "waldhof-18572.firebaseapp.com",
        projectId: "waldhof-18572",
        storageBucket: "waldhof-18572.firebasestorage.app",
        messagingSenderId: "208519351730",
        appId: "1:208519351730:web:e599af71e71821e5c828ab"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>
</head>
<body>
  <h1>Turnierplan</h1>
  <div class="spiel-liste" id="liste"></div>

  <script>
    function ladeAlleSpiele() {
      let teams = [];

      db.ref("teams").once("value").then(tSnap => {
        teams = tSnap.val() || [];

        const liste = document.getElementById("liste");
        liste.innerHTML = "";

        const ladeUndZeige = (pfad, label) => {
          db.ref(pfad).once("value").then(snap => {
            const spiele = snap.val() || [];

            spiele.forEach((spiel, i) => {
              const div = document.createElement("div");
              div.className = "spiel";

              const t1 = typeof spiel.t1 === 'number' ? (teams[spiel.t1] || `Team ${spiel.t1+1}`) : (spiel.t1 || "—");
              const t2 = typeof spiel.t2 === 'number' ? (teams[spiel.t2] || `Team ${spiel.t2+1}`) : (spiel.t2 || "—");
              const g1 = spiel.g1 ?? "-";
              const g2 = spiel.g2 ?? "-";
              const zeit = spiel.zeit ? new Date(spiel.zeit).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : "";

              div.innerHTML = `
                <div class="info">${label} ${i+1}${zeit ? ' – ' + zeit : ''}</div>
                <strong>${t1} ${g1} : ${g2} ${t2}</strong>
              `;
              liste.appendChild(div);
            });
          });
        };

        ladeUndZeige("spiele", "Gruppenspiel");
        ladeUndZeige("viertelfinale", "Viertelfinale");
        ladeUndZeige("halbfinale", "Halbfinale");
        ladeUndZeige("finale", "Finale");
        ladeUndZeige("spielPlatz3", "Spiel um Platz 3");
        ladeUndZeige("spielPlatz9", "Spiel um Platz 9");
      });
    }

    ladeAlleSpiele();
  </script>
</body>
</html>

